<?xml version='1.0' encoding='UTF-8'?>
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
                      xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.2.xsd">


    <jb:bean beanId="inventor" class="eu.ohim.sp.external.domain.person.Inventor" createOnElement="//Inventor">

        <!-- <jb:value data="//InventorDetails/Inventor/InventorIdentifier" property="personNumber"/>   -->
        <jb:value data="//InventorDetails/Inventor/InventorIncorporationCountryCode" property="incorporationCountry"/>
        <jb:value data="//InventorDetails/Inventor/InventorIncorporationState" property="incorporationState"/>
        <jb:value data="//InventorDetails/Inventor/InventorLegalEntity" property="legalForm"/>
        <jb:value data="//InventorDetails/Inventor/InventorNationalityCode" property="nationality"/>

        <jb:value data="//Inventor/@operationCode" decoder="SPEnum" property="operationCode">
            <jb:decodeParam name="enumType">eu.ohim.sp.external.domain.person.OperationCodeType</jb:decodeParam>
            <jb:decodeParam name="Insert">INSERT</jb:decodeParam>
            <jb:decodeParam name="Delete">DELETE</jb:decodeParam>
        </jb:value>

        <jb:wiring beanIdRef="inventorAddresses" property="addresses"/>
        <jb:wiring beanIdRef="inventorName" property="name"/>
        <jb:wiring beanIdRef="inventorIdentifiers" property="identifiers"/>
    </jb:bean>

    <jb:bean beanId="inventorIdentifiers" class="java.util.ArrayList" createOnElement="//InventorDetails/Inventor">
        <jb:wiring beanIdRef="inventorId"/>
    </jb:bean>

    <jb:bean beanId="inventorId" class="eu.ohim.sp.external.domain.person.PersonIdentifier" createOnElement="//InventorDetails/Inventor/InventorIdentifier">
        <jb:value data="//InventorDetails/Inventor/InventorIdentifier" property="value"/>
        <jb:value data="//InventorDetails/Inventor/InventorIdentifier/@identifierKindCode" property="identifierKindCode"/>
    </jb:bean>

    <jb:bean beanId="inventorFreeFormatCity" class="eu.ohim.sp.integration.domain.smooks.FreeFormatString"
             createOnElement="//InventorDetails/Inventor/InventorDomicileLocality">
        <jb:value data="//InventorDetails/Inventor/InventorDomicileLocality" property="value"/>
    </jb:bean>

    <jb:bean beanId="inventorAddresses" class="java.util.ArrayList" createOnElement="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Address">
        <jb:wiring beanIdRef="inventorAddress"/>
    </jb:bean>

    <jb:bean beanId="inventorAddress" class="eu.ohim.sp.external.domain.contact.Address" createOnElement="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Address">
        <jb:expression property="city">inventorFreeFormatCity!=null?inventorFreeFormatCity.getValue():inventorAddress.city</jb:expression>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Address/FormattedAddress/AddressCity" property="city"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Address/AddressCountryCode" property="country"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Address/FormattedAddress/AddressPostcode" property="postCode"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Address/FormattedAddress/AddressState" property="state"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Address/FormattedAddress/AddressStreet" property="street"/>
    </jb:bean>

    <jb:bean beanId="inventorPhone" class="eu.ohim.sp.external.domain.contact.Phone" createOnElement="//InventorDetails/Inventor/InventorAddressBook/ContactInformationDetails/Phone">
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/ContactInformationDetails/Phone" property="number"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/ContactInformationDetails/Phone/@phoneKind" decoder="SPEnum" property="phoneKind">
            <jb:decodeParam name="enumType">eu.ohim.sp.external.domain.contact.PhoneKind</jb:decodeParam>
            <jb:decodeParam name="defaultValue">OTHER</jb:decodeParam>
            <jb:decodeParam name="Fixed">FIXED</jb:decodeParam>
            <jb:decodeParam name="Mobile Phone">MOBILE</jb:decodeParam>
            <jb:decodeParam name="Other">OTHER</jb:decodeParam>
            <jb:decodeParam name="Undefined">OTHER</jb:decodeParam>
        </jb:value>
    </jb:bean>

    <jb:bean beanId="inventorName" class="eu.ohim.sp.external.domain.person.PersonName" createOnElement="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Name">
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Name/FormattedName/FirstName" property="firstName"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Name/FormattedName/LastName" property="lastName"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Name/FormattedName/MiddleName" property="middleName"/>
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Name/FormattedName/OrganizationName" property="organizationName"/>
    </jb:bean>

    <jb:bean beanId="inventorName" class="eu.ohim.sp.external.domain.person.PersonName" createOnElement="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Name/FreeFormatName">
        <jb:value data="//InventorDetails/Inventor/InventorAddressBook/FormattedNameAddress/Name/FreeFormatName/FreeFormatNameDetails/FreeFormatNameLine" property="lastName"/>
    </jb:bean>

</smooks-resource-list>
